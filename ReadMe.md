#### 


This repository is to generate experiment data that can be adapted to container-based environmemnt.



As the experiments are conducted through [Apptainer](https://apptainer.org/) containers, the experiment data are thus converted into smaller groups. Each group contains all the needed data to run in a container. Note that a job here requires one compute node and runs 30 containers at the same time. If you have the machine that you can not run 30 containers or can run more, you need to change J30Container.sh and the number of jobs.


### Basic Steps to Generate Experiment Data
##### Get solidity name, solc version, and contract name for each contract in the SGUARD dataset.<br>
```
execute sGuard_DP.py in Pycharm IDE
```

##### Generate experiment data to get binary files.<br>
```
execute 23_exp_compile_sGuard.py in Pycharm IDE
```

##### Collect the info of the compilable contracts.<br>
Get the info of the compilable contracts based on the binary files produced in the experiment, the expriment data of which is generated by 23_exp_compile_sGuard.py.
```
execute get_contracts_info_compiled.py in Pycharm IDE
```

##### Generate experiment data for actual evaluation.<br>
```
execute 23_exp_sGuard_4800.py in Pycharm IDE
```

Important Note:<br>
 Since the binary files are already produced and the information of the compilable contracts is collected, we can directly go to the step to generate experiment data for actual evaluation, i.e., execute 23_exp_sGuard_4800.py. But before that, make sure the paths in Constants.py are correct or valid.


### Steps to Run Experiments in [TACC](https://tacc.utexas.edu)
suppose you already have an account in TACC and have resources allocated.<br>
1, login to the login node.<br>
```
ssh user_name@xxx.tacc.utexas.edu #login to your account
```
2, upload the generated experiment data to the directory where you wish to do experiments.<br>
```
scp local path, remote path # upload in local terminal
```

3, enter to a compute node by executing: <br>
```
idev
```
4, load Apptainer:
```
module load tacc-apptainer
```

5, pull docker images:<br>
```
apptainer pull docker:/23278942/compile1 # used to compile contracts
apptainer pull docker:/23278942/smartexecutor  
apptainer pull docker:/23278942/mythril_v0.23.22
```
6, exit the compute node to the login node.
```
exit
```
7, go to the root of experiment data uploaded.<br>
8, modify the submit*.sh files, which are to submit jobs.<br>
```
nano submit_*.sh # go and set the correct path and image file
```
9, submit jobs.
```
./submit_*.sh

```
